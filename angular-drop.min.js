/*
 AngularDrop v0.0.1-f770de9
 (c) 2013 Caitlin Potter & Contributors. http://caitp.github.io/angular-drop
 License: MIT
*/
(function(n,v,q){'use strict';function r(){}function s(){}var p={full:"0.0.1-f770de9",major:"0",minor:"0",dot:"1",codeName:"badger"},l,u={"false":!1,"true":!0,"":!0},k=function(a,d,c){Object.defineProperty?Object.defineProperty(a,d,{get:c,set:function(){},configurable:!1,enumerable:!0}):a.__defineGetter__?a.__defineGetter__(d,c):a[d]=c()},t,w=/^(\s*(\.-?([a-z\u00A0-\u10FFFF]|(\\\d+))([0-9a-z\u00A0-\u10FFFF_-]|(\\\d+))*)\s*)+$/i,x=function(){var a="matches matchesSelector msMatchesSelector mozMatchesSelector webkitMatchesSelector oMatchesSelector".split(" ");
if("function"===typeof n.Element&&"object"===typeof n.Element.prototype)for(var d=0,c=a.length;d<c;++d){var e=a[d];if("function"===typeof n.Element.prototype[e]){var h=n.Element.prototype[e];return function(a,b){return h.call(a[0],b)}}}return"function"===typeof $&&"function"===typeof $.prototype.is?function(a,b){return a.is(b)}:"function"===typeof Sizzle&&"function"===typeof Sizzle.matchesSelector?function(a,b){return Sizzle.matchesSelector(a[0],b)}:function(a,b){if(b&&w.test(b))return b=b.replace(/\s+/g,
"").replace("."," ").replace(/^\s+/,"").replace(/\s+$/,""),a.hasClass(b);throw Error("Only class-based selectors are supported in this browser.");}},f={nodeEq:function(a,d){return typeof("string"===a.nodeName?a.nodeName.toLowerCase():a[0].nodeName).toLowerCase()===d},offset:function(a){a=a.length?a[0]:a;var d={top:0,left:0},c=a&&a.ownerDocument;if(c){c=c.documentElement;if(!f.contains(c,a))return d;angular.isFunction(a.getBoundingClientRect)&&(d=a.getBoundingClientRect());a=f.window(c);return{top:d.top+
a.pageYOffset-c.clientTop,left:d.left+a.pageXOffset-c.clientLeft}}},contains:function(a,d){var c=9===a.nodeType?a.documentElement:a,e=d&&d.parentNode;return a===e||!(!e||1!==e.nodeType||!f.contains(c,e))},window:function(a){a="undefined"===typeof a.nodeName&&"number"===typeof a.length?a[0]:a;return f.isWindow(a)?a:9===a.nodeType&&a.defaultView||a.ownerDocument&&(a.ownerDocument.defaultView||a.ownerDocument.parentWindow)},isWindow:function(a){return a&&a.document&&a.location&&a.alert&&a.setInterval},
swapCss:function(a,d,c,e){var h,m={};for(h in d)m[h]=a.style[h],a.style[h]=d[h];c=c.apply(a,e||[]);for(h in d)a.style[h]=m[h];return c},swapDisplay:/^(none|table(?!-c[ea]).+)/,cssShow:{position:"absolute",visibility:"hidden",display:"block"},size:function(a){function d(a){return{width:a.offsetWidth,height:a.offsetHeight}}var c=angular.element(a);a=a.nodeName?a:a[0];return 0===a.offsetWidth&&f.swapDisplay.test(c.css("display"))?f.swapCss(a,f.cssShow,d,[a]):d(a)},keepSize:function(a){a=f.size(a);a.width+=
"px";a.height+="px";return a},closest:function(a,d){a=angular.element(a);if($.fn&&angular.isFunction($.fn.closest))return a.closest(d);a=a[0];d=d.toLowerCase();do if(a.nodeName.toLowerCase()===d)return angular.element(a);while(a=a.parentNode)}},y={dragKeepSize:"keepSize",dragWithin:"dragWithin"},z=["$drag","$document","$interpolate","$timeout",function(a,d,c,e){return{restrict:"A",link:function(e,m,b){var g={};angular.forEach(y,function(a,m){if("undefined"!==typeof b[m]){var d;a:if(d=c(b[m],!1)(e),
"string"===typeof d){var f;if(u.hasOwnProperty(d)){d=u[d];break a}else f=parseInt(d,10),f===f&&(d=f)}g[a]=d}});a.draggable(m,g)}}}],A=function(){function a(a){angular.isUndefined(a)&&(a=n.event||{pageX:0,pageY:0,preventDefault:function(){}});angular.isFunction(a.preventDefault)||(a.preventDefault=function(){});return a}function d(a){if("undefined"!==typeof a&&0!==a.length){var e=f.offset(a);a=f.size(a);e.right=e.left+a.width;e.bottom=e.top+a.height;return e}}this.$get=["$document","$drop",function(c,
e){var h={isDraggable:function(a){return!!h.draggable(a,!1)},draggable:function(a,b){a=angular.element(a);var e=a.data("$draggable");if(e)return e;if(!1===b)return q;b=angular.extend({delay:500,distance:1},b||{});e=new r;e.element=a;e.options=b;a.on("mousedown",e.dragStart);a.data("$draggable",e);return e}};r.prototype={constructor:r,dragStart:function(e){e=a(e);e.preventDefault();var b=angular.isObject(this)&&this.constructor===r?this:h.draggable(this);l&&l.dragEnd(e);l=b;b.cssDisplay=b.element.css("display");
b.dimensions=f.size(b.element);b.hanging||(b.cssPosition=b.element.css("position"),b.options.keepSize&&(b.keepSize={width:b.element[0].style.width,height:b.element[0].style.height},b.element.css(f.keepSize(b.element))));if("string"===typeof b.options.dragWithin){var g;g=b.options.dragWithin;var k=b.element;g=""!==g.length?/^(\.|#)/.test(g)&&$.fn&&angular.isFunction($.fn.closest)?d(k.parent().closest(g)):/^(\^|parent)$/.test(g)?d(k.parent()):d(f.closest(k.parent(),g)):void 0;b.constraints=g}b.offset=
b.positionAbs=f.offset(b.element);b.offset.scroll=!1;angular.extend(b.offset,{click:{top:e.pageY-b.offset.top,left:e.pageX-b.offset.left}});b.lastMouseY=e.pageY;b.lastMouseX=e.pageX;b.startEvent=e;b.element.css({position:"absolute",left:b.offset.left,top:b.offset.top});c.on("mousemove",b.drag);c.on("mouseup",b.dragEnd)},dragEnd:function(a){a.preventDefault();c.off("mousemove",self.drag);c.off("mouseup",self.dragEnd);e.drop(a)},drag:function(e){e=a(e);e.preventDefault();var b=l;if(b){var d=b.element.prop("style"),
h=e.pageY;e=e.pageX;var c=d.left||0,f;f=parseInt(d.top||0,10)+(h-b.lastMouseY);c=parseInt(c,10)+(e-b.lastMouseX);if(!b.constraints||c>=b.constraints.left&&c+b.dimensions.width<=b.constraints.right&&f>=b.constraints.top&&f+b.dimensions.height<=b.constraints.bottom)d.left=c+"px",d.top=f+"px";b.lastMouseY=h;b.lastMouseX=e}},finish:function(){this.element.css({position:this.cssPosition});l=this.dimensions=q}};k(h,"current",function(){return l});k(h,"version",function(){return p});return h}];k(this,"version",
function(){return p})},B=["$drop","$parse",function(a,d){return{restrict:"A",compile:function(c,e){return function(e,c,b){e=d(b.dropAllowed||"undefined")(e);c=a.droppable(c);e&&c.allowedSelectors(e)}}}}],C=function(){this.$get=["$document","$rootScope",function(a,d){var c={isDroppable:function(a){return!!$drag.droppable(a,!1)},droppable:function(a,d){a=angular.element(a);var c=a.data("$droppable");if(c)return c;if(!1===d)return q;d=angular.extend({constraints:null,delay:500,distance:1},d||{});c=new s;
c.element=a;c.options=d;a.data("$droppable",c);return c},drop:function(a,c){function f(){b.hanging=!0;b.element.css({display:b.cssDisplay});l=q;d.$emit("$badDrop",b)}if(l&&("undefined"===typeof a&&(a=n.event),angular.isObject(a)&&("number"===typeof a.clientX&&"number"===typeof a.clientY?(c=a.clientY,a=a.clientX):"number"===typeof a.left&&"number"===typeof a.top&&(c=a.top,a=a.left)),"number"===typeof a&&"number"===typeof c)){var b=l,g;b.element.css({display:"none"});g=v.elementFromPoint(a,c);if(!g)return f();
3===g.nodeType&&(g=g.parentNode);g=angular.element(g);g=g.inheritedData("$droppable");if(!g||!this.dropAllowed(g,b.element))return f();g.drop(b);return!0}},dropAllowed:function(a,d){var c=a.allowedSelectors();if(!c||!angular.isArray(c))return!0;for(var b=0;b<c.length;++b){var f=c[b];if("string"===typeof f){var k=d;"function"!==typeof t&&(t=x());if(t(k,f))return!0}}return!1}};s.prototype={constructor:s,drop:function(a,c){a=a||l;if("number"===typeof a.length||a.nodeName)a=angular.element(a).data("$draggable");
a&&a.constructor===r&&(c=angular.extend(c||{},{display:a.cssDisplay}),this.element.append(a.element),a.options.keepSize&&(a.element.css(a.keepSize),a.keepSize=q),a.element.css({display:c.display}),a.hanging=!1,d.$$phase||d.$apply(),a.finish())},allowedSelectors:function(a){return 0<arguments.length?("string"===typeof a&&(a=a.split(",")),angular.isArray(a)&&(this.allowed=a),this):this.allowed}};k(c,"version",function(){return p});return c}];k(this,"version",function(){return p})},D=function(){this.$get=
[function(){var a={};k(a,"current",function(){return l});k(a,"version",function(){return p});return a}];k(this,"version",function(){return p})};(function(){angular.module("ui.drop",[],["$provide",function(a){a.provider({$dnd:D,$drag:A,$drop:C})}]).directive({draggable:z,droppable:B})})()})(window,document);
//# sourceMappingURL=angular-drop.min.js.map
